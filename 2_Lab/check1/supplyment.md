å¥½çš„ï¼Œæˆ‘å°†ä¸ºæ‚¨æŠŠå®éªŒæ–‡æ¡£ä¸­å…³äº **å®éªŒå†…å®¹ï¼ˆLab Contentï¼‰** çš„æ ¸å¿ƒéƒ¨åˆ†ç¿»è¯‘æˆæ¸…æ™°çš„ä¸­æ–‡ Markdown æ ¼å¼ï¼Œä½œä¸ºæ‚¨ç†è§£å®éªŒçš„è¡¥å……ææ–™ã€‚

-----

## ğŸ”¬ å®éªŒå†…å®¹æ€»ç»“ï¼šCheck 1 - æ‹¼æ¥å­ä¸²ä¸ºå­—èŠ‚æµ

[cite\_start]æœ¬å®éªŒæ—¨åœ¨è®©æ‚¨å®ç° TCP æ¥æ”¶æ–¹çš„ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼š**é‡ç»„å™¨ï¼ˆReassemblerï¼‰**ï¼Œå®ƒè´Ÿè´£å°†ä»ä¸å¯é ç½‘ç»œä¸­æ¥æ”¶åˆ°çš„ä¹±åºå­ä¸²é‡æ–°ç»„è£…æˆå¯é ã€æœ‰åºçš„å­—èŠ‚æµ [cite: 52, 56, 57]ã€‚

### 0\. æ¦‚è¿° (Overview)

[cite\_start]åœ¨ Checkpoint 0 ä¸­ï¼Œæ‚¨ä½¿ç”¨äº† Linux å†…å»ºçš„ TCP å®ç°æ¥è·å–ä¿¡æ¯ï¼Œè¯¥å®ç°èƒ½å¤Ÿæä¾›ä¸€å¯¹å¯é çš„ã€æœ‰åºçš„å­—èŠ‚æµ [cite: 25, 26][cite\_start]ã€‚è€Œåº•å±‚ç½‘ç»œåªæä¾›â€œå°½åŠ›è€Œä¸ºâ€ï¼ˆbest-effortï¼‰çš„æ•°æ®æŠ¥ï¼Œè¿™äº›æ•°æ®æŠ¥å¯èƒ½ä¼šä¸¢å¤±ã€ä¹±åºã€è¢«ç¯¡æ”¹æˆ–é‡å¤ [cite: 26, 27]ã€‚

[cite\_start]åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨ï¼Œæ‚¨å°†è‡ªå·±å®ç° TCP [cite: 29][cite\_start]ã€‚TCP çš„ä½œç”¨åœ¨äºä½¿ç”¨**ä¸å¯é çš„æ•°æ®æŠ¥**æ¥æä¾›ä¸€å¯¹**å¯é çš„å­—èŠ‚æµ** [cite: 33]ã€‚

  * æ‚¨åœ¨ Checkpoint 0 ä¸­å®ç°çš„ `ByteStream` å°†è¢«ç”¨äºåœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼š
      * [cite\_start]ä¸€ä¸ªâ€œå‡ºç«™â€çš„ `ByteStream`ï¼šç”¨äºæœ¬åœ°åº”ç”¨å†™å…¥å¹¶å‘é€ç»™å¯¹ç­‰æ–¹çš„æ•°æ® [cite: 36]ã€‚
      * [cite\_start]ä¸€ä¸ªâ€œå…¥ç«™â€çš„ `ByteStream`ï¼šç”¨äºä»å¯¹ç­‰æ–¹æ¥æ”¶å¹¶ä¾›æœ¬åœ°åº”ç”¨è¯»å–çš„æ•°æ® [cite: 36]ã€‚

### 2\. å°†å­ä¸²æŒ‰åºæ’åˆ— (Putting substrings in sequence)

[cite\_start]å‘é€æ–¹å°†å­—èŠ‚æµåˆ†å‰²æˆçŸ­ç‰‡æ®µï¼ˆå­ä¸²ï¼Œæ¯ä¸ªä¸è¶…è¿‡çº¦ 1,460 å­—èŠ‚ï¼‰ï¼Œä½¿å…¶èƒ½å¤Ÿé€‚åº”æ•°æ®æŠ¥ [cite: 54][cite\_start]ã€‚æ¥æ”¶æ–¹å¿…é¡»å°†è¿™äº›ç‰‡æ®µé‡æ–°ç»„è£…æˆå®ƒä»¬æœ€åˆçš„è¿ç»­å­—èŠ‚æµ [cite: 56]ã€‚

[cite\_start]æ‚¨çš„ä»»åŠ¡æ˜¯å®ç°ä¸€ä¸ªåä¸º `Reassembler` çš„æ•°æ®ç»“æ„æ¥è´Ÿè´£è¿™ç§é‡ç»„ [cite: 57]ã€‚

#### `Reassembler` æ¥å£ (Interface)

[cite\_start]`Reassembler` å°†æ¥æ”¶åŒ…å«å­—èŠ‚ä¸²å’Œè¯¥ä¸²åœ¨æ•´ä¸ªæµä¸­èµ·å§‹ç´¢å¼•çš„å­ä¸² [cite: 58][cite\_start]ã€‚æµä¸­çš„æ¯ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªä»é›¶å¼€å§‹è®¡æ•°çš„å”¯ä¸€ç´¢å¼• [cite: 59, 94][cite\_start]ã€‚ä¸€æ—¦ `Reassembler` çŸ¥é“æµä¸­çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå®ƒå°±ä¼šå°†å…¶å†™å…¥ `ByteStream` çš„ **Writer** ç«¯ [cite: 60]ã€‚

[cite\_start]ä»¥ä¸‹æ˜¯ `Reassembler` çš„å…¬å…±æ¥å£ [cite: 61, 62, 63, 64, 65]ï¼š

```cpp
// æ’å…¥ä¸€ä¸ªæ–°çš„å­ä¸²ï¼Œå°†å…¶é‡ç»„æˆ ByteStreamã€‚
void insert(uint64_t first_index, std::string data, bool is_last_substring);

// Reassembler å†…éƒ¨å­˜å‚¨äº†å¤šå°‘å­—èŠ‚ï¼Ÿ
uint64_t bytes_pending() const;

// è®¿é—®è¾“å‡ºæµçš„ Reader ç«¯ã€‚
Reader& reader();
```

> [cite\_start]**æ³¨æ„ï¼š** æ‚¨å¯ä»¥æ·»åŠ ä»»ä½•ç§æœ‰æˆå‘˜å’Œæˆå‘˜å‡½æ•°ï¼Œä½†ä¸èƒ½æ›´æ”¹å…¬å…±æ¥å£ [cite: 69, 137][cite\_start]ã€‚`Reassembler` **åªä½¿ç”¨** `ByteStream` çš„ **Writer** ç«¯ [cite: 60, 114]ã€‚

#### 2.1 `Reassembler` çš„å†…éƒ¨å­˜å‚¨åŸåˆ™ (Internal Storage Principles)

`Reassembler` å¿…é¡»å¤„ç†ä¸‰ç±»çŸ¥è¯†ï¼š

1.  [cite\_start]**æµä¸­çš„ä¸‹ä¸€ä¸ªå­—èŠ‚**ï¼šåº”**ç«‹å³**æ¨é€åˆ° `ByteStream` çš„ Writer ç«¯ (`output.writer()`) [cite: 74, 75, 104, 105]ã€‚
2.  [cite\_start]**åœ¨å¯ç”¨å®¹é‡å†…ä½†é¡ºåºä¸å¯¹çš„å­—èŠ‚**ï¼šè¿™äº›å­—èŠ‚å› ä¸ºå‰é¢çš„å­—èŠ‚ç¼ºå¤±è€Œæ— æ³•å†™å…¥ï¼Œåº”**å†…éƒ¨å­˜å‚¨**åœ¨ `Reassembler` ä¸­ [cite: 76, 77, 108]ã€‚
3.  [cite\_start]**è¶…å‡ºæµå¯ç”¨å®¹é‡çš„å­—èŠ‚**ï¼šè¿™äº›å­—èŠ‚åº”**è¢«ä¸¢å¼ƒ** [cite: 78]ã€‚

[cite\_start]**å®¹é‡é™åˆ¶ (`capacity`)**[cite: 80, 85]:

å®¹é‡å¯¹å†…å­˜ä½¿ç”¨è¿›è¡Œäº†é™åˆ¶ï¼Œå®ƒæ˜¯ä»¥ä¸‹ä¸¤è€…çš„ä¸Šé™ï¼š

1.  [cite\_start]å·²é‡ç»„çš„ `ByteStream` ä¸­ç¼“å†²çš„å­—èŠ‚æ•°ï¼ˆå›¾ä¸­çš„**ç»¿è‰²åŒºåŸŸ**ï¼‰ [cite: 82, 90]ã€‚
2.  [cite\_start]â€œæœªç»„è£…â€å­ä¸²ï¼ˆå³ `Reassembler` å†…éƒ¨å­˜å‚¨ï¼Œå›¾ä¸­çš„**çº¢è‰²åŒºåŸŸ**ï¼‰æ‰€ä½¿ç”¨çš„å­—èŠ‚æ•° [cite: 83, 89]ã€‚

-----

#### 2.2 å¸¸è§é—®é¢˜ (FAQs)

| é—®é¢˜ | ç­”æ¡ˆè¦ç‚¹ |
| :--- | :--- |
| **ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç´¢å¼•ï¼Ÿ** | [cite\_start]é›¶ [cite: 94]ã€‚ |
| **æ•ˆç‡è¦æ±‚ï¼Ÿ** | [cite\_start]é€‰æ‹©é«˜æ•ˆçš„æ•°æ®ç»“æ„ã€‚åŸºå‡†æ˜¯ $0.1\text{ Gbit/s}$ï¼ˆ100 å…†æ¯”ç‰¹æ¯ç§’ï¼‰ä»¥ä¸Š [cite: 95, 96, 98]ã€‚ |
| **å¦‚ä½•å¤„ç†ä¸ä¸€è‡´çš„å­ä¸²ï¼Ÿ** | [cite\_start]å¯ä»¥å‡è®¾å®ƒä»¬ä¸å­˜åœ¨ã€‚å‡è®¾å­˜åœ¨ä¸€ä¸ªç‹¬ç‰¹çš„åº•å±‚å­—èŠ‚æµï¼Œæ‰€æœ‰å­ä¸²éƒ½æ˜¯å®ƒçš„ï¼ˆå‡†ç¡®çš„ï¼‰åˆ‡ç‰‡ [cite: 100, 101]ã€‚ |
| **å­ä¸²å¯ä»¥é‡å å—ï¼Ÿ** | [cite\_start]å¯ä»¥ [cite: 106]ã€‚ |
| **å†…éƒ¨å­˜å‚¨å¯ä»¥å­˜å‚¨é‡å çš„å­ä¸²å—ï¼Ÿ** | [cite\_start]**ä¸å¯ä»¥**ã€‚å…è®¸å­˜å‚¨é‡å å­ä¸²ä¼šç ´åâ€œå®¹é‡â€ä½œä¸ºå†…å­˜é™åˆ¶çš„æ¦‚å¿µã€‚å¦‚æœè°ƒç”¨è€…æä¾›äº†å…³äºåŒä¸€ç´¢å¼•çš„å†—ä½™ä¿¡æ¯ï¼Œ`Reassembler` åº”åªå­˜å‚¨ä¸€ä»½ä¿¡æ¯ [cite: 109, 110, 111, 112]ã€‚ |
| **ä½•æ—¶å†™å…¥æµï¼Ÿ** | [cite\_start]å°½å¿«ã€‚åªæœ‰å½“å®ƒå‰é¢æœ‰å°šæœªè¢«â€œæ¨é€â€çš„å­—èŠ‚æ—¶ï¼Œæ‰ä¸åº”è¢«å†™å…¥æµ [cite: 104, 105]ã€‚ |

### 4\. æäº¤ (Submit)

#### [cite\_start]æäº¤å‰çš„å‡†å¤‡ [cite: 138]ï¼š

1.  [cite\_start]**Git æäº¤**ï¼šç¡®ä¿æ‰€æœ‰æ›´æ”¹éƒ½å·²æäº¤ (`git status`) [cite: 139, 140]ã€‚
2.  [cite\_start]**ä»£ç é£æ ¼**ï¼šè¿è¡Œ `cmake --build build --target format` (ä½¿ä»£ç é£æ ¼è§„èŒƒåŒ–) [cite: 141]ã€‚
3.  [cite\_start]**è¿è¡Œæµ‹è¯•**ï¼šè¿è¡Œ `cmake --build build --target check1` (ç¡®ä¿è‡ªåŠ¨æµ‹è¯•é€šè¿‡) [cite: 142]ã€‚

#### [cite\_start]æŠ¥å‘Šè¦æ±‚ [cite: 144, 145]ï¼š

æŠ¥å‘Š (`writeups/check1.md`) çº¦ä¸º 20 åˆ° 50 è¡Œï¼Œæ¯è¡Œä¸è¶…è¿‡ 80 ä¸ªå­—ç¬¦ï¼Œéœ€åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

1.  [cite\_start]**ç»“æ„å’Œè®¾è®¡**ï¼šæè¿°æ‚¨ä»£ç çš„é«˜å±‚ç»“æ„å’Œè®¾è®¡é€‰æ‹©ï¼Œçªå‡ºé‡è¦æ–¹é¢ï¼Œè®¨è®ºå¤‡é€‰æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼ˆå¦‚æ€§èƒ½ã€å¤æ‚åº¦ã€é£é™©ç­‰ï¼‰ [cite: 146, 148, 149, 150, 151]ã€‚
2.  [cite\_start]**å®ç°æŒ‘æˆ˜**ï¼šæè¿°æ‚¨è®¤ä¸ºæœ€æ£˜æ‰‹çš„éƒ¨åˆ†å¹¶è§£é‡ŠåŸå› ï¼Œä»¥åŠæ‚¨å¦‚ä½•å…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œå¹¶å¦‚ä½•ç¡®ä¿ä»£ç ç»´æŠ¤äº†æ‚¨çš„å‡è®¾å’Œä¸å˜é‡ [cite: 152, 153, 154, 155]ã€‚
3.  [cite\_start]**å‰©ä½™ Bug**ï¼šæŒ‡å‡ºå¹¶è§£é‡Šä»£ç ä¸­å¯èƒ½å­˜åœ¨çš„ä»»ä½• bug æˆ–æœªå¤„ç†çš„è¾¹ç¼˜æƒ…å†µ [cite: 156]ã€‚
4.  [cite\_start]**å·¥æ—¶**ï¼šå¡«å†™å®Œæˆæœ¬æ¬¡ä½œä¸šèŠ±è´¹çš„æ€»å°æ—¶æ•° [cite: 157]ã€‚

-----

å¸Œæœ›è¿™ä»½ç¿»è¯‘æ€»ç»“èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œå¼€å§‹æœ¬æ¬¡å®éªŒï¼æ‚¨å¯¹æŠ¥å‘Šä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ¨åˆ†æœ‰ä»€ä¹ˆç–‘é—®å—ï¼Ÿ